<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FarmTrails - AgriTourism & Farmer Marketplace</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #4CAF50;
            --secondary: #FF9800;
            --light: #F1F8E9;
            --dark: #1B5E20;
            --text: #212121;
            --accent: #8BC34A;
            --white: #ffffff;
            --gray-light: #f5f5f5;
            --gray: #757575;
            --shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            --radius: 8px;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: var(--gray-light);
            color: var(--text);
            line-height: 1.6;
            overflow-x: hidden;
            padding-bottom: 70px;
        }
        
        /* Header Styles */
        header {
            background: linear-gradient(to right, var(--primary), var(--accent));
            color: var(--white);
            padding: 1rem;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: var(--shadow);
        }
        
        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 15px;
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .logo i {
            font-size: 1.8rem;
        }
        
        .logo h1 {
            font-size: 1.5rem;
            font-weight: 700;
        }
        
        .header-right {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .desktop-nav {
            display: none;
        }
        
        .desktop-nav-item {
            color: var(--white);
            text-decoration: none;
            padding: 8px 16px;
            border-radius: var(--radius);
            transition: background 0.3s;
            display: flex;
            align-items: center;
            gap: 5px;
            position: relative;
        }
        
        .desktop-nav-item:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        
        .cart-icon {
            position: relative;
            cursor: pointer;
        }
        
        .cart-count {
            position: absolute;
            top: -8px;
            right: -8px;
            background-color: var(--secondary);
            color: var(--white);
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 0.8rem;
            font-weight: bold;
        }
        
        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: var(--radius);
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s;
            font-size: 0.9rem;
        }
        
        .btn-outline {
            background: transparent;
            border: 2px solid var(--white);
            color: var(--white);
        }
        
        .btn-outline:hover {
            background: var(--white);
            color: var(--primary);
        }
        
        .btn-primary {
            background: var(--secondary);
            color: var(--white);
        }
        
        .btn-primary:hover {
            background: #F57C00;
        }
        
        /* Mobile Menu */
        .mobile-menu-btn {
            display: none;
            background: none;
            border: none;
            color: var(--white);
            font-size: 1.5rem;
            cursor: pointer;
        }
        
        /* Hero Section */
        .hero {
            background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), 
                        url('https://images.unsplash.com/photo-1500937386664-56d1dfef3854?ixlib=rb-4.0.3&auto=format&fit=crop&w=1600&h=500&q=80') no-repeat center center/cover;
            color: var(--white);
            padding: 3rem 1rem;
            text-align: center;
        }
        
        .hero-content {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .hero h2 {
            font-size: 1.8rem;
            margin-bottom: 1rem;
            font-weight: 700;
        }
        
        .hero p {
            font-size: 1rem;
            margin-bottom: 1.5rem;
        }
        
        .search-bar {
            display: flex;
            max-width: 600px;
            margin: 0 auto;
        }
        
        .search-bar input {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: var(--radius) 0 0 var(--radius);
            font-size: 1rem;
        }
        
        .search-bar button {
            padding: 12px 20px;
            background: var(--secondary);
            color: var(--white);
            border: none;
            border-radius: 0 var(--radius) var(--radius) 0;
            cursor: pointer;
        }
        
        /* Section Styles */
        .section {
            padding: 2rem 1rem;
        }
        
        .section-title {
            text-align: center;
            margin-bottom: 1.5rem;
            color: var(--dark);
            font-size: 1.5rem;
            font-weight: 700;
        }
        
        .tours, .products {
            background: var(--light);
        }
        
        /* Card Styles */
        .card-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }
        
        .card {
            background: var(--white);
            border-radius: var(--radius);
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: transform 0.3s;
            cursor: pointer;
        }
        
        .card:hover {
            transform: translateY(-3px);
        }
        
        .card-img {
            height: 140px;
            overflow: hidden;
        }
        
        .card-img img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .card-content {
            padding: 1rem;
        }
        
        .card h3 {
            margin-bottom: 0.5rem;
            color: var(--dark);
            font-size: 1rem;
        }
        
        .card p {
            color: var(--gray);
            margin-bottom: 0.8rem;
            font-size: 0.85rem;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        
        .card-price {
            font-weight: bold;
            color: var(--secondary);
            font-size: 1rem;
            margin-bottom: 0.8rem;
        }
        
        .card-actions {
            display: flex;
            gap: 8px;
        }
        
        .card-actions .btn {
            flex: 1;
            text-align: center;
            padding: 6px 10px;
            font-size: 0.8rem;
        }
        
        /* Features Section */
        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 1.5rem;
        }
        
        .feature-card {
            background: var(--white);
            padding: 1.5rem;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            text-align: center;
            transition: transform 0.3s;
        }
        
        .feature-card:hover {
            transform: translateY(-3px);
        }
        
        .feature-card i {
            font-size: 2.2rem;
            color: var(--primary);
            margin-bottom: 1rem;
        }
        
        .feature-card h3 {
            margin-bottom: 0.5rem;
            color: var(--dark);
        }
        
        /* Bottom Navigation */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--white);
            display: flex;
            justify-content: space-around;
            padding: 10px 0;
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
            z-index: 100;
        }
        
        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-decoration: none;
            color: var(--gray);
            font-size: 0.7rem;
            transition: color 0.3s;
            flex: 1;
            position: relative;
        }
        
        .nav-item.active {
            color: var(--primary);
        }
        
        .nav-item i {
            font-size: 1.2rem;
            margin-bottom: 4px;
        }
        
        /* Cart Modal */
        .cart-modal {
            display: none;
            position: fixed;
            top: 0;
            right: 0;
            width: 100%;
            max-width: 400px;
            height: 100%;
            background: var(--white);
            box-shadow: -2px 0 10px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            overflow-y: auto;
        }
        
        .cart-modal.open {
            display: block;
        }
        
        .cart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
            border-bottom: 1px solid #eee;
            background: var(--primary);
            color: var(--white);
        }
        
        .close-cart {
            background: none;
            border: none;
            color: var(--white);
            font-size: 1.5rem;
            cursor: pointer;
        }
        
        .cart-items {
            padding: 1rem;
        }
        
        .cart-item {
            display: flex;
            gap: 10px;
            padding: 10px 0;
            border-bottom: 1px solid #eee;
        }
        
        .cart-item-img {
            width: 60px;
            height: 60px;
            object-fit: cover;
            border-radius: var(--radius);
        }
        
        .cart-item-details {
            flex: 1;
        }
        
        .cart-item-name {
            font-weight: 500;
            margin-bottom: 5px;
            font-size: 0.9rem;
        }
        
        .cart-item-price {
            color: var(--secondary);
            font-weight: bold;
            font-size: 0.9rem;
        }
        
        .cart-item-quantity {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-top: 5px;
        }
        
        .quantity-btn {
            background: #eee;
            border: none;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            cursor: pointer;
        }
        
        .remove-item {
            color: #f44336;
            background: none;
            border: none;
            cursor: pointer;
            margin-left: auto;
        }
        
        .cart-total {
            padding: 1rem;
            border-top: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            font-weight: bold;
        }
        
        .checkout-btn {
            display: block;
            width: calc(100% - 2rem);
            margin: 0 1rem 1rem;
            padding: 12px;
            background: var(--secondary);
            color: var(--white);
            border: none;
            border-radius: var(--radius);
            font-weight: bold;
            cursor: pointer;
            text-align: center;
            text-decoration: none;
        }
        
        .empty-cart {
            padding: 2rem;
            text-align: center;
            color: var(--gray);
        }
        
        .overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 999;
        }
        
        .overlay.open {
            display: block;
        }
        
        /* Footer */
        footer {
            background: var(--dark);
            color: var(--white);
            padding: 2rem 1rem;
        }
        
        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .footer-section h3 {
            margin-bottom: 1rem;
        }
        
        .footer-section ul {
            list-style: none;
        }
        
        .footer-section ul li {
            margin-bottom: 0.5rem;
        }
        
        .footer-section a {
            color: #ddd;
            text-decoration: none;
        }
        
        .social-icons {
            display: flex;
            gap: 15px;
            margin-top: 1rem;
        }
        
        .social-icons a {
            color: var(--white);
            font-size: 1.5rem;
        }
        
        .copyright {
            margin-top: 2rem;
            padding-top: 1rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            text-align: center;
        }
        
        /* Responsive Design */
        @media (min-width: 768px) {
            body {
                padding-bottom: 0;
            }
            
            .bottom-nav {
                display: none;
            }
            
            .desktop-nav {
                display: flex;
                align-items: center;
                gap: 15px;
            }
            
            .mobile-menu-btn {
                display: none;
            }
            
            .card-container {
                grid-template-columns: repeat(3, 1fr);
                gap: 20px;
            }
            
            .card-img {
                height: 180px;
            }
            
            .hero {
                padding: 4rem 1rem;
            }
            
            .hero h2 {
                font-size: 2.2rem;
            }
            
            .section {
                padding: 3rem 1rem;
            }
            
            .section-title {
                font-size: 2rem;
            }
        }
        
        @media (min-width: 1024px) {
            .card-container {
                grid-template-columns: repeat(4, 1fr);
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container header-content">
            <div class="logo">
                <i class="fas fa-leaf"></i>
                <h1>FarmTrails</h1>
            </div>
            
            <button class="mobile-menu-btn" id="mobileMenuBtn">
                <i class="fas fa-bars"></i>
            </button>
            
            <div class="header-right" id="headerRight">
                <!-- Desktop Navigation -->
                <nav class="desktop-nav">
                    <a href="#" class="desktop-nav-item active">
                        <i class="fas fa-home"></i>
                        <span>Home</span>
                    </a>
                    <a href="#" class="desktop-nav-item">
                        <i class="fas fa-th-large"></i>
                        <span>Categories</span>
                    </a>
                    <a href="#" class="desktop-nav-item">
                        <i class="fas fa-user"></i>
                        <span>Profile</span>
                    </a>
                    <div class="cart-icon" id="cartIcon">
                        <i class="fas fa-shopping-cart"></i>
                        <span class="cart-count" id="cartCount">0</span>
                    </div>
                </nav>
                
                <div class="profile">
                    <a href="farmerpage.html"><button class="btn btn-outline">Farmer Login</button></a>
                </div>
            </div>
        </div>
    </header>

    <!-- Cart Modal -->
    <div class="overlay" id="overlay"></div>
    <div class="cart-modal" id="cartModal">
        <div class="cart-header">
            <h3>Your Cart</h3>
            <button class="close-cart" id="closeCart">&times;</button>
        </div>
        <div class="cart-items" id="cartItems">
            <div class="empty-cart" id="emptyCart">
                <i class="fas fa-shopping-cart fa-2x"></i>
                <p>Your cart is empty</p>
            </div>
        </div>
        <div class="cart-total" id="cartTotal" style="display: none;">
            <span>Total:</span>
            <span id="totalAmount">₹0</span>
        </div>
        <a href="payment.html" class="checkout-btn" id="checkoutBtn" style="display: none;">Proceed to Checkout</a>
    </div>

    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-content">
            <h2>Experience Authentic Rural Life</h2>
            <p>Book farm tours directly with local farmers and buy fresh produce straight from the source</p>
            
            <div class="search-bar">
                <input type="text" id="globalSearch" placeholder="Search for farms, products or experiences...">
                <button onclick="searchProducts()"><i class="fas fa-search"></i> Search</button>
            </div>
        </div>
    </section>
    
    <!-- Tours Section -->
    <section class="section tours">
        <div class="container">
            <h2 class="section-title">Popular Farm Tours</h2>
            <div class="card-container">
                <div class="card" onclick="window.location.href='product-details.html?id=tour1'">
                    <div class="card-img">
                        <img src="https://images.unsplash.com/photo-1520052203542-d3095f1b6cf0?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&h=200&q=80" alt="Organic Farm Tour">
                    </div>
                    <div class="card-content">
                        <h3>Organic Vegetable Farm Tour</h3>
                        <p>Join us for a guided tour of our organic farm and learn about sustainable farming practices</p>
                        <div class="card-price">₹499 / person</div>
                        <div class="card-actions">
                            <button class="btn btn-outline">Details</button>
                            <button class="btn btn-primary" onclick="event.stopPropagation(); addToCart('Organic Vegetable Farm Tour', 499, 'https://images.unsplash.com/photo-1520052203542-d3095f1b6cf0?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&h=200&q=80')">Book Now</button>
                        </div>
                    </div>
                </div>
                
                <div class="card" onclick="window.location.href='product-details.html?id=tour2'">
                    <div class="card-img">
                        <img src="https://images.unsplash.com/photo-1570042225831-d98fa7577f1e?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&h=200&q=80" alt="Dairy Farm Experience">
                    </div>
                    <div class="card-content">
                        <h3>Dairy Farm Experience</h3>
                        <p>Experience a day in the life of a dairy farmer with milking sessions and butter making</p>
                        <div class="card-price">₹699 / person</div>
                        <div class="card-actions">
                            <button class="btn btn-outline">Details</button>
                            <button class="btn btn-primary" onclick="event.stopPropagation(); addToCart('Dairy Farm Experience', 699, 'https://images.unsplash.com/photo-1570042225831-d98fa7577f1e?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&h=200&q=80')">Book Now</button>
                        </div>
                    </div>
                </div>
                
                <div class="card" onclick="window.location.href='product-details.html?id=tour3'">
                    <div class="card-img">
                        <img src="https://images.unsplash.com/photo-1506377247377-2a5b3b417ebb?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&h=200&q=80" alt="Vineyard Tour">
                    </div>
                    <div class="card-content">
                        <h3>Vineyard & Wine Tasting</h3>
                        <p>Tour through beautiful vineyards and learn about wine production with tasting sessions</p>
                        <div class="card-price">₹899 / person</div>
                        <div class="card-actions">
                            <button class="btn btn-outline">Details</button>
                            <button class="btn btn-primary" onclick="event.stopPropagation(); addToCart('Vineyard & Wine Tasting', 899, 'https://images.unsplash.com/photo-1506377247377-2a5b3b417ebb?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&h=200&q=80')">Book Now</button>
                        </div>
                    </div>
                </div>
                
                <div class="card" onclick="window.location.href='product-details.html?id=tour4'">
                    <div class="card-img">
                        <img src="https://images.unsplash.com/photo-1598300042247-d088f8ab3a91?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&h=200&q=80" alt="Fruit Picking">
                    </div>
                    <div class="card-content">
                        <h3>Seasonal Fruit Picking</h3>
                        <p>Pick your own seasonal fruits straight from the orchard and learn about fruit cultivation</p>
                        <div class="card-price">₹399 / person</div>
                        <div class="card-actions">
                            <button class="btn btn-outline">Details</button>
                            <button class="btn btn-primary" onclick="event.stopPropagation(); addToCart('Seasonal Fruit Picking', 399, 'https://images.unsplash.com/photo-1598300042247-d088f8ab3a91?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&h=200&q=80')">Book Now</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Products Section -->
    <section class="section products">
        <div class="container">
            <h2 class="section-title">Fresh From The Farm</h2>
            <div class="card-container" id="productsContainer">
                <!-- Products will be loaded dynamically -->
            </div>
        </div>
    </section>
    
    <!-- Features Section -->
    <section class="section">
        <div class="container">
            <h2 class="section-title">How It Works</h2>
            <div class="features">
                <div class="feature-card">
                    <i class="fas fa-search-location"></i>
                    <h3>Discover Farms</h3>
                    <p>Explore authentic farming experiences near you or at your travel destination</p>
                </div>
                
                <div class="feature-card">
                    <i class="fas fa-calendar-check"></i>
                    <h3>Book Tours</h3>
                    <p>Reserve your spot for farm visits, workshops, and agricultural experiences</p>
                </div>
                
                <div class="feature-card">
                    <i class="fas fa-shopping-basket"></i>
                    <h3>Buy Fresh Produce</h3>
                    <p>Purchase farm-fresh products directly from farmers without middlemen</p>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>FarmTrails</h3>
                    <p>Connecting tourists with local farmers for authentic agricultural experiences and fresh farm products.</p>
                    <div class="social-icons">
                        <a href="#"><i class="fab fa-facebook"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-youtube"></i></a>
                    </div>
                </div>
                
                <div class="footer-section">
                    <h3>Quick Links</h3>
                    <ul>
                        <li><a href="#">Home</a></li>
                        <li><a href="#">Farm Tours</a></li>
                        <li><a href="#">Farm Products</a></li>
                        <li><a href="#">Become a Host</a></li>
                        <li><a href="#">About Us</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h3>Contact Us</h3>
                    <ul>
                        <li><i class="fas fa-map-marker-alt"></i> 123 Farm Road, Agricultural District</li>
                        <li><i class="fas fa-phone"></i> +91 6309841404</li>
                        <li><i class="fas fa-envelope"></i> gchandavath@gmail.com</li>
                    </ul>
                </div>
            </div>
            
            <div class="copyright">
                <p>&copy; 2025 FarmTrails. All rights reserved.</p>
            </div>
        </div>
    </footer>
    
    <!-- Bottom Navigation -->
    <nav class="bottom-nav">
        <a href="#" class="nav-item active">
            <i class="fas fa-home"></i>
            <span>Home</span>
        </a>
        <a href="#" class="nav-item">
            <i class="fas fa-th-large"></i>
            <span>Category</span>
        </a>
        <a href="#" class="nav-item">
            <i class="fas fa-user"></i>
            <span>Profile</span>
        </a>
        <a href="#" class="nav-item" id="bottomCartBtn">
            <i class="fas fa-shopping-cart"></i>
            <span>Cart</span>
            <span class="cart-count" id="bottomCartCount">0</span>
        </a>
    </nav>

    <script>
        // Mobile menu functionality
        document.getElementById('mobileMenuBtn').addEventListener('click', function() {
            const headerRight = document.getElementById('headerRight');
            headerRight.classList.toggle('mobile-open');
        });

        // Global variables
        let cartItems = JSON.parse(localStorage.getItem('cartItems')) || [];
        let products = [];

        // Cart functionality
        const cartIcon = document.getElementById('cartIcon');
        const cartModal = document.getElementById('cartModal');
        const overlay = document.getElementById('overlay');
        const closeCart = document.getElementById('closeCart');
        const cartItemsContainer = document.getElementById('cartItems');
        const emptyCart = document.getElementById('emptyCart');
        const cartCount = document.getElementById('cartCount');
        const cartTotal = document.getElementById('cartTotal');
        const totalAmount = document.getElementById('totalAmount');
        const checkoutBtn = document.getElementById('checkoutBtn');
        const bottomCartBtn = document.getElementById('bottomCartBtn');
        const bottomCartCount = document.getElementById('bottomCartCount');
        
        // Open cart
        if (cartIcon) {
            cartIcon.addEventListener('click', openCart);
        }
        bottomCartBtn.addEventListener('click', openCart);
        
        function openCart() {
            cartModal.classList.add('open');
            overlay.classList.add('open');
            document.body.style.overflow = 'hidden';
        }
        
        // Close cart
        closeCart.addEventListener('click', closeCartModal);
        overlay.addEventListener('click', closeCartModal);
        
        function closeCartModal() {
            cartModal.classList.remove('open');
            overlay.classList.remove('open');
            document.body.style.overflow = 'auto';
        }
        
        // Add to cart function
        function addToCart(name, price, image, productId = null) {
            // Check if item already exists in cart
            const existingItemIndex = cartItems.findIndex(item => item.name === name);
            
            if (existingItemIndex !== -1) {
                // Item exists, increase quantity
                cartItems[existingItemIndex].quantity += 1;
            } else {
                // Item doesn't exist, add new item
                cartItems.push({
                    name,
                    price,
                    image,
                    productId,
                    quantity: 1
                });
            }
            
            updateCart();
            saveCartToLocalStorage();
            
            // Show notification
            showNotification(`${name} added to cart!`);
            
            // Open cart automatically on desktop, but not on mobile
            if (window.innerWidth > 768) {
                openCart();
            }
        }
        
        // Update cart UI
        function updateCart() {
            // Update cart count
            const totalItems = cartItems.reduce((total, item) => total + item.quantity, 0);
            
            // Update cart count in header (desktop)
            if (cartCount) {
                cartCount.textContent = totalItems;
            }
            
            // Update cart count in bottom nav (mobile)
            if (bottomCartCount) {
                bottomCartCount.textContent = totalItems;
                if (totalItems > 0) {
                    bottomCartCount.style.display = 'flex';
                } else {
                    bottomCartCount.style.display = 'none';
                }
            }
            
            // Clear cart items container
            cartItemsContainer.innerHTML = '';
            
            if (cartItems.length === 0) {
                // Show empty cart message
                emptyCart.style.display = 'block';
                cartTotal.style.display = 'none';
                checkoutBtn.style.display = 'none';
            } else {
                // Hide empty cart message
                emptyCart.style.display = 'none';
                
                // Add items to cart
                let total = 0;
                
                cartItems.forEach((item, index) => {
                    const itemTotal = item.price * item.quantity;
                    total += itemTotal;
                    
                    const cartItemElement = document.createElement('div');
                    cartItemElement.className = 'cart-item';
                    cartItemElement.innerHTML = `
                        <img src="${item.image}" alt="${item.name}" class="cart-item-img">
                        <div class="cart-item-details">
                            <div class="cart-item-name">${item.name}</div>
                            <div class="cart-item-price">₹${item.price}</div>
                            <div class="cart-item-quantity">
                                <button class="quantity-btn" onclick="changeQuantity(${index}, -1)">-</button>
                                <span>${item.quantity}</span>
                                <button class="quantity-btn" onclick="changeQuantity(${index}, 1)">+</button>
                            </div>
                        </div>
                        <button class="remove-item" onclick="removeItem(${index})">
                            <i class="fas fa-trash"></i>
                        </button>
                    `;
                    
                    cartItemsContainer.appendChild(cartItemElement);
                });
                
                // Update total
                totalAmount.textContent = `₹${total}`;
                cartTotal.style.display = 'flex';
                checkoutBtn.style.display = 'block';
                
                // Update checkout button with cart data
                const cartData = encodeURIComponent(JSON.stringify(cartItems));
                checkoutBtn.href = `payment.html?cart=${cartData}&total=${total}`;
            }
        }
        
        // Change item quantity
        function changeQuantity(index, change) {
            cartItems[index].quantity += change;
            
            // Remove item if quantity is 0
            if (cartItems[index].quantity <= 0) {
                cartItems.splice(index, 1);
            }
            
            updateCart();
            saveCartToLocalStorage();
        }
        
        // Remove item from cart
        function removeItem(index) {
            cartItems.splice(index, 1);
            updateCart();
            saveCartToLocalStorage();
        }
        
        // Save cart to localStorage
        function saveCartToLocalStorage() {
            localStorage.setItem('cartItems', JSON.stringify(cartItems));
        }
        
        // Show notification
        function showNotification(message) {
            const notification = document.createElement('div');
            notification.textContent = message;
            notification.style.position = 'fixed';
            notification.style.bottom = '80px';
            notification.style.right = '20px';
            notification.style.backgroundColor = 'var(--primary)';
            notification.style.color = 'white';
            notification.style.padding = '10px 20px';
            notification.style.borderRadius = 'var(--radius)';
            notification.style.zIndex = '1000';
            notification.style.boxShadow = '0 2px 10px rgba(0,0,0,0.2)';
            notification.style.fontSize = '0.9rem';
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.opacity = '0';
                notification.style.transition = 'opacity 0.5s';
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 500);
            }, 2000);
        }
        
        // Load products from MongoDB or sample data
        function loadProducts() {
            // Sample products data
            products = [
                {
                    _id: '1',
                    name: 'Turmeric Powder',
                    description: 'Freshly harvested from our organic farm',
                    price: 350,
                    unit: '500gm',
                    image: 'https://images.unsplash.com/photo-1615485500834-bc10199bc727?q=80&w=880&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D',
                    category: 'spices',
                    stock: 45
                },
                {
                    _id: '2',
                    name: 'Honey',
                    description: 'Fresh honey collected from our farms',
                    price: 450,
                    unit: '500gm',
                    image: 'https://images.unsplash.com/photo-1559715546-f66295d5aaa5?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&h=200&q=80',
                    category: 'dairy',
                    stock: 32
                },
                {
                    _id: '3',
                    name: 'Jaggery',
                    description: '100% natural jaggery from farms',
                    price: 300,
                    unit: 'kg',
                    image: 'https://upload.wikimedia.org/wikipedia/commons/thumb/0/09/Sa-indian-gud.jpg/800px-Sa-indian-gud.jpg',
                    category: 'sweets',
                    stock: 28
                },
                {
                    _id: '4',
                    name: 'Organic Tomatoes',
                    description: 'Fresh, pesticide-free tomatoes',
                    price: 80,
                    unit: 'kg',
                    image: 'https://images.unsplash.com/photo-1546470427-e212b7d310ff?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&h=400&q=80',
                    category: 'vegetables',
                    stock: 15
                },
                {
                    _id: '5',
                    name: 'Fresh Milk',
                    description: 'Pure farm fresh milk',
                    price: 60,
                    unit: 'liter',
                    image: 'https://images.unsplash.com/photo-1563636619-e9143da7973b?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&h=400&q=80',
                    category: 'dairy',
                    stock: 20
                },
                {
                    _id: '6',
                    name: 'Farm Eggs',
                    description: 'Free-range organic eggs',
                    price: 120,
                    unit: 'dozen',
                    image: 'https://images.unsplash.com/photo-1582722872445-44dc5f7e3c8f?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&h=400&q=80',
                    category: 'poultry',
                    stock: 30
                }
            ];
            
            displayProducts(products);
        }
        
        // Display products
        function displayProducts(products) {
            const container = document.getElementById('productsContainer');
            
            if (!products || products.length === 0) {
                container.innerHTML = `
                    <div style="text-align: center; padding: 3rem; grid-column: 1 / -1;">
                        <i class="fas fa-search fa-3x" style="color: #ddd; margin-bottom: 1rem;"></i>
                        <h3>No products found</h3>
                        <p>Try adjusting your search or filters</p>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = products.map(product => `
                <div class="card" onclick="window.location.href='product-details.html?id=${product._id}'">
                    <div class="card-img">
                        <img src="${product.image}" alt="${product.name}" onerror="this.src='https://via.placeholder.com/300x200?text=Product+Image'">
                    </div>
                    <div class="card-content">
                        <h3>${product.name}</h3>
                        <p>${product.description.substring(0, 100)}...</p>
                        <div class="card-price">₹${product.price} / ${product.unit}</div>
                        <div class="card-actions">
                            <button class="btn btn-outline">Details</button>
                            <button class="btn btn-primary" onclick="event.stopPropagation(); addToCart('${product.name}', ${product.price}, '${product.image}', '${product._id}')" ${product.stock === 0 ? 'disabled' : ''}>
                                ${product.stock === 0 ? 'Out of Stock' : 'Add to Cart'}
                            </button>
                        </div>
                        ${product.stock < 10 && product.stock > 0 ? `<p style="color: var(--secondary); font-size: 0.8rem; margin-top: 0.5rem;">Only ${product.stock} left!</p>` : ''}
                    </div>
                </div>
            `).join('');
        }
        
        // Search products
        function searchProducts() {
            const searchTerm = document.getElementById('globalSearch').value.toLowerCase().trim();
            const allCards = document.querySelectorAll('.card-container .card');
            let hasResults = false;

            allCards.forEach(card => {
                const title = card.querySelector('h3').textContent.toLowerCase();
                const description = card.querySelector('p').textContent.toLowerCase();
                
                if (title.includes(searchTerm) || description.includes(searchTerm)) {
                    card.style.display = 'block';
                    hasResults = true;
                } else {
                    card.style.display = 'none';
                }
            });

            // Show message if no results
            const productsContainer = document.getElementById('productsContainer');
            let noResultsMsg = productsContainer.querySelector('.no-results');
            
            if (!hasResults && searchTerm) {
                if (!noResultsMsg) {
                    noResultsMsg = document.createElement('div');
                    noResultsMsg.className = 'no-results';
                    noResultsMsg.style.gridColumn = '1 / -1';
                    noResultsMsg.style.textAlign = 'center';
                    noResultsMsg.style.padding = '2rem';
                    noResultsMsg.innerHTML = `
                        <i class="fas fa-search fa-3x" style="color: #ddd; margin-bottom: 1rem;"></i>
                        <h3>No products found</h3>
                        <p>Try adjusting your search terms</p>
                    `;
                    productsContainer.appendChild(noResultsMsg);
                }
            } else if (noResultsMsg) {
                noResultsMsg.remove();
            }
        }
        
        // Bottom navigation functionality
        document.querySelectorAll('.nav-item').forEach(item => {
            item.addEventListener('click', function(e) {
                e.preventDefault();
                document.querySelectorAll('.nav-item').forEach(nav => {
                    nav.classList.remove('active');
                });
                this.classList.add('active');
                
                const text = this.querySelector('span').textContent;
                if (text === 'Home') {
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                } else if (text === 'Category') {
                    alert('Category page would open here');
                } else if (text === 'Profile') {
                    window.location.href = 'profile.html';
                }
            });
        });

        // Desktop navigation functionality
        document.querySelectorAll('.desktop-nav-item').forEach(item => {
            item.addEventListener('click', function(e) {
                if (!this.querySelector('.fa-shopping-cart')) {
                    e.preventDefault();
                    document.querySelectorAll('.desktop-nav-item').forEach(nav => {
                        nav.classList.remove('active');
                    });
                    this.classList.add('active');
                    
                    const text = this.querySelector('span').textContent;
                    if (text === 'Home') {
                        window.scrollTo({ top: 0, behavior: 'smooth' });
                    } else if (text === 'Categories') {
                        alert('Categories page would open here');
                    } else if (text === 'Profile') {
                        window.location.href = 'profile.html';
                    }
                }
            });
        });
        
        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', function() {
            loadProducts();
            
            // Add event listener for Enter key in search
            document.getElementById('globalSearch').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    searchProducts();
                }
            });
            
            // Close mobile menu when clicking outside
            document.addEventListener('click', function(e) {
                const headerRight = document.getElementById('headerRight');
                const mobileMenuBtn = document.getElementById('mobileMenuBtn');
                
                if (headerRight && mobileMenuBtn && !headerRight.contains(e.target) && !mobileMenuBtn.contains(e.target)) {
                    headerRight.classList.remove('mobile-open');
                }
            });

            // Initialize cart count
            updateCart();
        });
    </script>
</body>
</html>